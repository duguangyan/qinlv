(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/collection/collection"],{"052a":function(t,i,e){"use strict";e.r(i);var o=e("ebc6"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,function(){return o[t]})}(s);i["default"]=n.a},"168f":function(t,i,e){"use strict";e.r(i);var o=e("4142"),n=e("052a");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("70ab");var a=e("2877"),c=Object(a["a"])(n["default"],o["a"],o["b"],!1,null,"91dba454",null);i["default"]=c.exports},"2a51":function(t,i,e){"use strict";(function(t){e("b440"),e("921b");o(e("66fd"));var i=o(e("168f"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])},"2ab0":function(t,i,e){},4142:function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,o=(t._self._c,e("a15a"));t.$mp.data=Object.assign({},{$root:{m0:o}})},n=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return n})},"70ab":function(t,i,e){"use strict";var o=e("2ab0"),n=e.n(o);n.a},ebc6:function(t,i,e){"use strict";(function(t,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=l(e("8c11")),s=l(e("9e8e")),a=e("7384"),c=l(e("e0d7"));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){return e.e("components/common/Dialog").then(e.bind(null,"3b86"))},d=function(){return e.e("components/common/NavigationBar").then(e.bind(null,"9c1d"))},h={data:function(){return{currentPage:1,list:[],isEdit:!1,countChecked:0,total:0,Checked:n.default,Uncheck:s.default,pageSize:10,allLoaded:!1,loadText:"上拉加载更多...",hasAllCheck:!1,ids:[],isShow:!1,title:"您确定从收藏夹删除吗?",clickTitle:"管理",isClick:!0}},components:{Dialog:u,NavigationBar:d},onLoad:function(){this.getCollectionData()},onShow:function(){},onReachBottom:function(){this.loadBottom()},methods:{doClick:function(t){var i=this;this.isEdit=!this.isEdit;var e=this.list.map(function(t){return t.isEdit=i.isEdit,t});this.list=e,this.clickTitle=this.isEdit?"完成":"管理"},doConfirm:function(){this.doDel()},doCancel:function(){this.isShow=!1},goDetail:function(i,e){t.navigateTo({url:"/pages/order/goodsDetail/goodsDetail?shopId="+i+"&goodsId="+e})},doCheckAll:function(){var t=this;this.ids=[],this.hasAllCheck?(this.hasAllCheck=!1,this.list.forEach(function(i,e){i.isCheck=!1,t.ids=[]})):(this.hasAllCheck=!0,this.list.forEach(function(i,e){i.isCheck=!0,t.ids.push(t.list[e].goodsId)}))},hasAllChecked:function(){var t=this;this.hasAllCheck=!0,this.countChecked=0,this.ids=[],this.list.forEach(function(i,e){i.isCheck?(t.countChecked++,t.ids.push(t.list[e].goodsId)):t.hasAllCheck=!1}),console.log(o(this.countChecked," at pages\\user\\collection\\collection.vue:147"))},doListCheck:function(t){this.list[t].isCheck=!this.list[t].isCheck,this.hasAllChecked()},loadBottom:function(){var t=this;setTimeout(function(){t.allLoaded||(t.currentPage++,t.getCollectionData())},500)},getCollectionData:function(){var t=this,i={pageIndex:this.currentPage,pageSize:this.pageSize};(0,a.getCollectGoodsList)(i).then(function(i){if("1000"===i.code){var e=0;t.list=t.list.concat(i.data.records),t.total=e,t.isClick=t.list.length>0,t.list.length>=i.data.total&&(t.allLoaded=!0,t.loadText="数据已经加载完毕")}else c.default.tips(i.message||"获取收藏列表失败")}).catch(function(t){c.default.tips(t.message||"获取收藏列表失败")})},edit:function(){var t=this;this.isEdit=!this.isEdit;var i=this.list.map(function(i){return i.isEdit=t.isEdit,i});this.list=i},preDel:function(){if(this.ids.length<1)return c.default.tips("请先选择商品!");this.isShow=!0},doDel:function(){var t=this;this.isShow=!1;var i="";this.ids.forEach(function(e,o){i+=o===t.ids.length-1?e:e+","});var e={goodsId:i};(0,a.getCollectGoodsRemove)(e).then(function(i){"1000"===i.code?(t.ids.forEach(function(i,e){t.list.forEach(function(e,o){i===e.goodsId&&t.list.splice(o,1)})}),t.ids=[],t.isClick=t.list.length>0):c.default.tips(i.message||"删除失败")}).catch(function(t){c.default.tips(t.message||"删除失败")})}}};i.default=h}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["2a51","common/runtime","common/vendor"]]]);