(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/binding/binding"],{"011c":function(e,n,t){"use strict";t.r(n);var i=t("e8df"),o=t("edaf");for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);t("b4e6");var s,c=t("f0c5"),d=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"db6f9360",null,!1,i["a"],s);n["default"]=d.exports},"243d":function(e,n,t){"use strict";(function(e){t("b440"),t("921b");i(t("66fd"));var n=i(t("011c"));function i(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])},9896:function(e,n,t){"use strict";(function(e,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(t("f585")),a=c(t("e0d7")),s=t("7384");function c(e){return e&&e.__esModule?e:{default:e}}var d={data:function(){return{phone:"",code:"",codeText:"获取验证码",codeNum:"",isRight:!1,setCodeInterval:"",deviceId:"",appID:"wxb8afa388fa540c2a",fromWxLoginData:""}},components:{},onLoad:function(n){this.fromWxLoginData=JSON.parse(n.data),console.log(e("fromWxLoginData->",this.fromWxLoginData," at pages\\login\\binding\\binding.vue:49"))},onShow:function(){i.setStorageSync("isLogin",0)},methods:{doIsLogin:function(){this.isRight=!o.default.isPhone(this.phone)&&""!==this.code},getCode:function(){var n=this;if(console.log(e(o.default.isPhone(this.phone)," at pages\\login\\binding\\binding.vue:61")),""!==this.codeNum)return!1;if(o.default.isPhone(this.phone))return""===this.phone?(a.default.tips("手机号不能为空"),!1):(a.default.tips("手机号码不正确"),!1);this.deviceId=this.getUUID();var t={mobile:this.phone,deviceId:this.deviceId};(0,s.postUserSms)(t).then(function(e){a.default.tips(e.message),"1000"===e.code&&(n.codeText="重新发送",n.codeNum=59,n.setCodeInterval=setInterval(function(){0===n.codeNum?(n.codeNum="",clearInterval(n.setCodeInterval)):n.codeNum--},1e3))}).catch(function(e){a.default.tips(e.message||"错误")})},dologin:function(){var n=this;if(this.isRight){plus.device.uuid;var t={};t="mini_program"==this.fromWxLoginData.grant_type?{grant_type:"mini_program",scope:"2",client_id:"cwap",client_secret:"xx",deviceId:this.fromWxLoginData.deviceId,systemId:"2",miniCode:this.fromWxLoginData.miniCode,smsCode:this.code,mobile:this.phone,nickName:this.fromWxLoginData.userInfo.nickName,headImg:this.fromWxLoginData.userInfo.avatarUrl}:{grant_type:"wx_app",scope:"2",client_id:"cwap",client_secret:"xx",deviceId:this.fromWxLoginData.deviceId,systemId:"2",accessToken:this.fromWxLoginData.accessToken,openId:this.fromWxLoginData.openId,smsCode:this.code,mobile:this.phone},(0,s.postUserLogin)(t).then(function(t){console.log(e(JSON.stringify(t)," at pages\\login\\binding\\binding.vue:145")),i.setStorageSync("access_token",t.access_token),i.setStorageSync("uid",t.id),i.setStorageSync("phone",n.phone),""!=n.setCodeInterval&&clearInterval(n.setCodeInterval),n.getUserInfo()}).catch(function(n){console.log(e(JSON.stringify(n)," at pages\\login\\binding\\binding.vue:156")),a.default.tips(n.message||"登录错误")})}},getOpenIdByCode:function(){i.login({provider:"weixin",success:function(n){console.log(e("code",JSON.stringify(n.code)," at pages\\login\\binding\\binding.vue:166"));var t={code:n.code,providerId:"miniProgram"};console.log(e(t," at pages\\login\\binding\\binding.vue:171")),(0,s.openIdByCode)(t).then(function(n){console.log(e(n," at pages\\login\\binding\\binding.vue:173")),"1000"==n.code&&i.setStorageSync("openid",n.data)})}})},getUserInfo:function(){(0,s.getUserInfoData)().then(function(n){"1000"==n.code&&(console.log(e(JSON.stringify(n)," at pages\\login\\binding\\binding.vue:190")),i.setStorageSync("nickName",n.data.nickName),i.setStorageSync("headImgUrl",n.data.headImgUrl),i.navigateBack({delta:3}))}).catch(function(e){a.default.tips(e.message||"获取用户信息错误")})},getUUID:function(){for(var e=[],n="0123456789abcdef",t=0;t<36;t++)e[t]=n.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=n.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i}}};n.default=d}).call(this,t("0de9")["default"],t("6e42")["default"])},b4e6:function(e,n,t){"use strict";var i=t("c92b"),o=t.n(i);o.a},c92b:function(e,n,t){},e8df:function(e,n,t){"use strict";var i,o=function(){var e=this,n=e.$createElement;e._self._c},a=[];t.d(n,"b",function(){return o}),t.d(n,"c",function(){return a}),t.d(n,"a",function(){return i})},edaf:function(e,n,t){"use strict";t.r(n);var i=t("9896"),o=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(n,e,function(){return i[e]})}(a);n["default"]=o.a}},[["243d","common/runtime","common/vendor"]]]);