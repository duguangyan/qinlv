(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"3cf9":function(e,n,t){"use strict";t.r(n);var o=t("c548"),i=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);n["default"]=i.a},5081:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})},6804:function(e,n,t){"use strict";var o=t("98af"),i=t.n(o);i.a},"8cbe":function(e,n,t){"use strict";t.r(n);var o=t("5081"),i=t("3cf9");for(var s in i)"default"!==s&&function(e){t.d(n,e,function(){return i[e]})}(s);t("6804");var c=t("2877"),a=Object(c["a"])(i["default"],o["a"],o["b"],!1,null,"29db9864",null);n["default"]=a.exports},"98af":function(e,n,t){},b63d:function(e,n,t){"use strict";(function(e){t("b440"),t("921b");o(t("66fd"));var n=o(t("8cbe"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])},c548:function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(t("f585")),s=a(t("e0d7")),c=t("7384");function a(e){return e&&e.__esModule?e:{default:e}}var u={data:function(){return{phone:"",code:"",codeText:"获取验证码",codeNum:"",isRight:!1,setCodeInterval:"",deviceId:"",appID:"wxb8afa388fa540c2a"}},components:{},onLoad:function(){},onShow:function(){e.setStorageSync("isLogin",0)},methods:{wxLogin:function(){e.getProvider({service:"oauth",success:function(n){console.log(o(n.provider," at pages\\login\\login.vue:84")),~n.provider.indexOf("weixin")&&e.login({provider:"weixin",success:function(n){console.log(o("-------获取openid(unionid)-----"," at pages\\login\\login.vue:90")),console.log(o(JSON.stringify(n)," at pages\\login\\login.vue:91")),e.getUserInfo({provider:"weixin",success:function(e){console.log(o("-------获取微信用户所有-----"," at pages\\login\\login.vue:96")),console.log(o(JSON.stringify(e.userInfo)," at pages\\login\\login.vue:97"))}})}})}})},getuserinfo:function(n){console.log(o(n," at pages\\login\\login.vue:123")),e.login({provider:"weixin",success:function(n){console.log(o(n," at pages\\login\\login.vue:127")),e.setClipboardData({data:n.code,success:function(){console.log(o("success"," at pages\\login\\login.vue:132"))}}),e.showModal({content:n.code,success:function(){}})}})},doIsLogin:function(){this.isRight=!i.default.isPhone(this.phone)&&""!==this.code},getCode:function(){var e=this;if(console.log(o(i.default.isPhone(this.phone)," at pages\\login\\login.vue:150")),""!==this.codeNum)return!1;if(i.default.isPhone(this.phone))return""===this.phone?(s.default.tips("手机号不能为空"),!1):(s.default.tips("手机号码不正确"),!1);this.deviceId=this.getUUID();var n={mobile:this.phone,deviceId:this.deviceId};(0,c.postUserSms)(n).then(function(n){s.default.tips(n.message),"1000"===n.code&&(e.codeText="重新发送",e.codeNum=59,e.setCodeInterval=setInterval(function(){0===e.codeNum?(e.codeNum="",clearInterval(e.setCodeInterval)):e.codeNum--},1e3))}).catch(function(e){s.default.tips(e.message||"错误")})},dologin:function(){var n=this;if(this.isRight){plus.device.uuid;var t={grant_type:"sms_code",scope:"2",client_id:"cwap",client_secret:"xx",systemId:"2",deviceId:this.deviceId,mobile:this.phone,smsCode:this.code};(0,c.postUserLogin)(t).then(function(t){e.setStorageSync("access_token",t.access_token),e.setStorageSync("uid",t.id),e.setStorageSync("phone",n.phone),""!=n.setCodeInterval&&clearInterval(n.setCodeInterval),n.getUserInfo()}).catch(function(e){s.default.tips(e.message||"登录错误")})}},getUserInfo:function(){(0,c.getUserInfo)().then(function(n){"1000"===n.code&&(e.setStorageSync("nickName",n.data.nickName),e.setStorageSync("headImgUrl",n.data.headImgUrl),e.navigateBack({delta:1}))}).catch(function(e){s.default.tips(e.message||"获取用户信息错误")})},getUUID:function(){for(var e=[],n="0123456789abcdef",t=0;t<36;t++)e[t]=n.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=n.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var o=e.join("");return o}}};n.default=u}).call(this,t("6e42")["default"],t("0de9")["default"])}},[["b63d","common/runtime","common/vendor"]]]);